@model LaundryOrder

@{
    ViewData["Title"] = "Order Invoice";
}

<h1 class="mb-3">Order Invoice</h1>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5>Order Details</h5>
            </div>
            <div class="card-body">
                <p><strong>Order #:</strong> @Model.Id</p>
                <p><strong>Service:</strong> @Model.ServiceType</p>
                <p><strong>Date/Time:</strong> @Model.ScheduledAt</p>
                <p><strong>Address:</strong> @Model.GetDisplayAddress()</p>
                @if (!string.IsNullOrWhiteSpace(Model.Notes))
                {
                    <p><strong>Notes:</strong> @Model.Notes</p>
                }
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5>Payment Summary</h5>
            </div>
            <div class="card-body">
                @if (Model.Invoice != null)
                {
                    <table class="table table-sm">
                        <tr>
                            <td>Subtotal:</td>
                            <td class="text-end">@Model.Invoice.SubTotal.ToString("C")</td>
                        </tr>
                        @if (Model.Invoice.TaxAmount > 0)
                        {
                            <tr>
                                <td>Tax:</td>
                                <td class="text-end">@Model.Invoice.TaxAmount.ToString("C")</td>
                            </tr>
                        }
                        @if (Model.Invoice.DeliveryFee > 0)
                        {
                            <tr>
                                <td>Delivery Fee:</td>
                                <td class="text-end">@Model.Invoice.DeliveryFee.ToString("C")</td>
                            </tr>
                        }
                        @if (Model.Invoice.Tip > 0)
                        {
                            <tr>
                                <td>Tip:</td>
                                <td class="text-end">@Model.Invoice.Tip.ToString("C")</td>
                            </tr>
                        }
                        <tr class="fw-bold border-top">
                            <td>Total:</td>
                            <td class="text-end">@Model.Invoice.Total.ToString("C")</td>
                        </tr>
                    </table>

                    <div class="alert alert-info mt-3">
                        <strong>Status:</strong> <span class="badge bg-primary">@Model.Invoice.Status</span>
                    </div>

                    @if (Model.PaymentStatus == "paid")
                    {
                        <div class="alert alert-success">
                            <strong>Payment Received!</strong> Thank you for your business.
                        </div>
                    }
                    else if (Model.PaymentStatus == "pending")
                    {
                        <div class="alert alert-warning">
                            <strong>Payment Pending.</strong> We'll charge your card upon delivery.
                        </div>
                    }
                    else if (Model.PaymentStatus == "failed")
                    {
                        <div class="alert alert-danger">
                            <strong>Payment Failed.</strong> Please update your payment method or try again.
                        </div>
                    }
                }
                else
                {
                    <div class="alert alert-info">
                        Invoice will be generated when order is ready for delivery.
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="mt-3 d-flex gap-2">
    <a class="btn btn-outline-secondary" href="/Orders/History">Back to History</a>
</div>
